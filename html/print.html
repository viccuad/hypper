<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hypper documentation</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="design.html"><strong aria-hidden="true">1.</strong> Hypper Design</a></li><li class="chapter-item expanded "><a href="user/tutorials/installing.html"><strong aria-hidden="true">2.</strong> Installing</a></li><li class="chapter-item expanded "><a href="user/tutorials/quickstart.html"><strong aria-hidden="true">3.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="user/howto/index.html"><strong aria-hidden="true">4.</strong> How tos</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="user/howto/expandcharthypper.html"><strong aria-hidden="true">4.1.</strong> Expand a chart with Hypper annotations</a></li><li class="chapter-item expanded "><a href="user/howto/lintchart.html"><strong aria-hidden="true">4.2.</strong> Lint charts</a></li><li class="chapter-item expanded "><a href="user/howto/search.html"><strong aria-hidden="true">4.3.</strong> Search repos for Hypper charts</a></li></ol></li><li class="chapter-item expanded "><a href="reference-guides.html"><strong aria-hidden="true">5.</strong> Reference guides</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Hypper documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/rancher-sandbox/hypper" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#hypper-design" id="hypper-design">Hypper Design</a></h1>
<p>Hypper is a package manager built on Helm and inspired by other package managers
like zypper.</p>
<h2><a class="header" href="#how-hypper-differs-from-helm" id="how-hypper-differs-from-helm">How Hypper Differs From Helm</a></h2>
<p>Why build a package manager on a package manager? Helm is a package manager that
tries to make few assumptions. For example, Custom Resource Definitions (CRD)s
are a Kubernetes resource that extend the Kubernetes API. They can be used in
various ways and there are pitfalls with them. Helm makes very few assumptions
when it comes to them. Hypper is going to make some different assumptions which
will result in different features.</p>
<p>As differences between Hypper and Helm arise they will be documented along with
the reasons for the difference. This is in an effort to provide clarity.</p>
<p>When features from Hypper can be upstreamed into Helm they will be. In that way,
Hypper can act as a testing ground for Helm. We do not expect that every feature
will fit in upstream Helm.</p>
<p>A second element in the difference is that Helm, as a package manager, does not
handle environment deployment operations. Those are left to higher level tools
like Helmfile (a push model like Ansible) and the Flux Helm Operator (a pull
model like Chef). Helm expects higher level tools will use Helm and charts for
operating in different environments.</p>
<p>Hypper will move will make some assumptions that move it more towards the
environment management. This is in a different way from Helmfile or the Flux
Helm Operator but further than Helm will go.</p>
<h2><a class="header" href="#directory-structure" id="directory-structure">Directory Structure</a></h2>
<p>The directory structure is inspired by Helm with the following layout.</p>
<pre><code>.
├── cmd
│   └── hypper
├── docs
└── pkg
    └── action 
    └── ... 
</code></pre>
<ul>
<li>The <em>cmd/hypper</em> directory contains the client application. This CLI for mac,
linux, and windows is both a functional application and reference application
of the library.</li>
<li><em>docs</em> contains documentation on the design and usage of hypper.</li>
<li>The <em>pkg</em> directory contains a library meant to be imported by <em>cmd/hypper</em> and
other applications. The functionality needed is implemented here.</li>
<li><em>pkg/actions</em> contains the main functionality used by <em>cmd/hypper</em>.</li>
</ul>
<p>This is the same layout as Helm itself.</p>
<h2><a class="header" href="#design-intent" id="design-intent">Design Intent</a></h2>
<p>The following outline the initial major intentions of hypper.</p>
<h3><a class="header" href="#build-upon-helm" id="build-upon-helm">Build Upon Helm</a></h3>
<p>Helm provides much of the functionality we need. There are some areas we want
to deviate from it. Where Hypper can, it will leverage what Helm already does.
This includes repositories, charts, and how storage occurs for charts (unless we
create a new adapter).</p>
<h3><a class="header" href="#modern-terminal-ui" id="modern-terminal-ui">Modern Terminal UI</a></h3>
<p>Colors and icons are often present in modern terminals. Sometimes referred to
as eye candy, these features can improve user experience by drawing attention to
important things.</p>
<h3><a class="header" href="#optional-dependencies" id="optional-dependencies">Optional Dependencies</a></h3>
<p>In Helm, with Hypper is built on, there are two ways to handle dependencies.</p>
<ol>
<li>Explicitly declare other charts as dependencies. This will cause those charts
to be installed. When the templates are rendered they happen in the same
sandboxed environment.</li>
<li>Install charts separately and use values to connect them to each other. For
example, install PostreSQL with one chart and then pass connection information
into another chart using a Secret or values that generate a Secret.</li>
</ol>
<p>Hypper will support both of these types of dependencies an add a 3rd form of
dependency via an optional dependency. For example, you are developing something
that requires a prometheus CRD. You can depend on a chart that provides that CRD
but does not provide prometheus. The CRD chart or your chart can declare an
optional dependency on a chart that installs Prometheus. When using hypper to
install your chart you will be asked about installing the optional dependencies.
In development you can choose not to install the dependencies while in production
you can choose to install them.</p>
<p>The optional dependency handling will extend to all commands.</p>
<p>Optional dependencies will be specified using Helm chart annotations. This
enables the representation to be stored in the existing Helm chart structure.</p>
<h3><a class="header" href="#shared-dependencies" id="shared-dependencies">Shared Dependencies</a></h3>
<p>Sometimes you want to have a shared system dependency. For example, you may want
to have just a single Prometheus or Istio in a cluster. When you install an
application that depends on this shared dependency you want to install it if not
present and leverage the existing one if present.</p>
<p>With Helm there is a separation between those who provide charts and those who
consume them. Charts from various repositories can be installed in the same
cluster but are not guaranteed to work together. That is left as an exercise for
the chart authors.</p>
<p>Hypper will make it easier to have a repository of charts that work together but
can be installed separately.</p>
<p>The additional metadata will be stored as Helm chart annotations.</p>
<h3><a class="header" href="#oci-storage" id="oci-storage">OCI Storage</a></h3>
<p>OCI artifacts are a new way to store things. Helm supports storing Helm charts
in OCI distributions as an experimental feature. Many container registries
support storing non-images in them. The list includes Azure, AWS, Google Cloud,
GitHub Container Registry, and Harbor. The one notable exception is Docker Hub.</p>
<p>Kubernetes already needs to have a container registry. In air gapped, on-premise,
and custom environments you need a registry to store your images. If that can be
used to store charts instead of a separate system you have fewer system
dependencies.</p>
<p>Hypper will make OCI registries a primary element in the system.</p>
<p>One notable disadvantage to using an OCI registry for storing charts is a lack of
an <code>index.yaml</code> file. This file has metadata enabling some functionality that
can't be duplicated with an OCI registry due to APIs not existing (e.g., search).
To restore these features we are looking to put an index into an OCI registry.</p>
<p>Hypper will enable you to store the <code>index.yaml</code> file in an OCI registry in a
similar manner to an image or a chart. You will then be able to use it with
normal repo commands (e.g., <code>helm repo add test oci://ghcr.io/mattfarina/repoexample</code>).</p>
<h3><a class="header" href="#name-as-chart-identifier" id="name-as-chart-identifier">Name As Chart Identifier</a></h3>
<p>Zypper, the package manager used for openSUSE and other Linux distributions,
uses the package name as the identifier for it. You can change from one vendor
to another for a package with some differences but still the same package.</p>
<p>Helm does not make this form of assumption. It could be true. For example, you
could install a chart from one location and then update from a fork in another
location. Or two charts with the same name could be completely different. It
is the responsibility of the end user to make this decision.</p>
<p>Hypper is going to make the assumption that charts of the same name are the
same chart from different locations.</p>
<h3><a class="header" href="#performance" id="performance">Performance</a></h3>
<p>When working with many files over a network there are opportunities to use
caching, features of protocols, and design choices to improve performance. The
following examples illustrate this:</p>
<ul>
<li>JSON is faster to parse and uses less memory than YAML does. An <code>index.json</code>
file would faster and less memory intensive for Helm to work with than
<code>index.yaml</code>. A change like this could be done in a backwards compatible
manner.</li>
<li><code>index.yaml</code> files are regularly pulled down to get updates and this is a
manual step. Using HTTP headers we can check if the content changed and only
pull it in those cases. By doing that some of the updates can be automated,
as well. A header that could be used, for example, is <code>etag</code>.</li>
<li>Charts can be stored locally in a cache and used from there rather than being
downloaded each time. This cache could be stored in places like a CI system
(e.g., like the way packages are stored for programming languages) or on a
local development computer.</li>
</ul>
<h1><a class="header" href="#installing-hypper" id="installing-hypper">Installing Hypper</a></h1>
<p>This guide shows how to install the Hypper CLI. Hypper can be installed either from source, or from pre-built binary releases.</p>
<h2><a class="header" href="#from-binary-releases-linux-macos-windows" id="from-binary-releases-linux-macos-windows">From binary releases (Linux, macOS, Windows)</a></h2>
<p>Every <a href="https://github.com/rancher-sandbox/hypper/releases">release</a> of Hypper provides binaries for a variety of OSes. These binary versions can be manually downloaded and installed.</p>
<ul>
<li>Download your <a href="https://github.com/rancher-sandbox/hypper/releases">desired version</a></li>
<li>Unpack it (<code>tar -zxvf hypper-v0.0.2-linux-amd64.tar.gz</code>)</li>
<li>Find the hypper binary in the unpacked directory, and move it to its desired destination (<code>mv linux-amd64/hypper /usr/local/bin/hypper</code>)</li>
</ul>
<p>From there, you should be able to run the client and add the stable repo: see <code>hypper help</code>.</p>
<h2><a class="header" href="#from-script-linux-macos-windows" id="from-script-linux-macos-windows">From script (Linux, macOS, windows)</a></h2>
<p>Hypper now has an installer script that will automatically grab the latest version of hypper and install it locally.</p>
<p>You can fetch that script, and then execute it locally. It's well documented so that you can read through it and understand what it is doing before you run it.</p>
<pre><code>$ curl -fsSL -o get_hypper https://raw.githubusercontent.com/rancher-sandbox/hypper/main/scripts/get-hypper
$ chmod 700 get_hypper
$ ./get-hypper
</code></pre>
<p>Yes, you can <code>curl https://raw.githubusercontent.com/rancher-sandbox/hypper/main/scripts/get-hypper | bash</code> if you want to live on the edge.</p>
<p><strong>NOTE</strong></p>
<p><em>For installing using the script you need bash, curl/wget, and tar (openssl and sudo are optional).
Please check how you can install those requisites in your OS if needed.</em> </p>
<h2><a class="header" href="#from-source-linux-macos-windows" id="from-source-linux-macos-windows">From source (Linux, macOS, Windows)</a></h2>
<p>Building Hypper from source is a bit more work, but the best way to test the
latest (pre-release) Hypper version.</p>
<p>You must have a working Go environment (1.14+), and a POSIX environment with the proper tools installed (git, make).</p>
<p>For Windows, Hypper has been tested under <a href="https://www.cygwin.com/">cygwin</a> and it compiles correctly.</p>
<pre><code class="language-terminal">$ git clone https://github.com/rancher-sandbox/hypper/hypper.git
$ cd hypper
$ make
</code></pre>
<p>If required, it will fetch the dependencies and cache them, and validate
configuration.
It will then compile <code>hypper</code>, and place it in <code>bin/hypper</code> (<code>bin/hypper.exe</code> for windows).</p>
<h2><a class="header" href="#from-development-builds" id="from-development-builds">From development builds</a></h2>
<p>In addition to releases you can download and install development snapshots of
Hypper from <a href="https://github.com/rancher-sandbox/hypper/actions/workflows/ci.yml?query=branch%3Amain+is%3Asuccess+workflow%3ACI">Github Actions</a>.</p>
<p>On each successful CI run, artifacts are stored for that run. Just download the binaries and follow the same steps as installing from binary releases.</p>
<p><strong>NOTE</strong></p>
<p><em>Development snapshots could be in a broken state, with missing functionality or breaking changes.
We do not recommend using development snapshots on your production environment.</em></p>
<h2><a class="header" href="#conclusion" id="conclusion">Conclusion</a></h2>
<p>In most cases, installation is as simple as getting a pre-built hypper binary. This document covers additional cases for those who want to do more sophisticated things with Hypper.</p>
<p>Once you have the Hypper Client successfully installed, you can move on to the <a href="user/tutorials/./quickstart.html">quickstart guide</a>.</p>
<h1><a class="header" href="#quickstart" id="quickstart">Quickstart</a></h1>
<p>This guide covers how you can quickly get started using Hypper.</p>
<p>If you already know Helm, this will be a breeze, as Hypper follows Helm's workflow
and extends its functionalities to install Helm and charts that have been extended
to work with Hypper.</p>
<h2><a class="header" href="#prerequisites" id="prerequisites">Prerequisites</a></h2>
<p>The following prerequisites are required:</p>
<ol>
<li>A Kubernetes cluster.</li>
<li>A Chart repository to install charts from.</li>
</ol>
<h2><a class="header" href="#install-hypper" id="install-hypper">Install Hypper</a></h2>
<p>See the <a href="user/tutorials/./installing.html">installation guide</a>.</p>
<h2><a class="header" href="#configuring-hypper-by-initializing-repositories" id="configuring-hypper-by-initializing-repositories">Configuring Hypper by initializing repositories</a></h2>
<p>Hypper enables you to deploy Helm and Hypper charts into your Kubernetes
cluster. To simplify that, the best way is to add a chart repository, for
example one with Helm charts:</p>
<pre><code class="language-terminal">$ hypper repo add bitnami https://charts.bitnami.com/bitnami
</code></pre>
<p>You can add several repositories. Let's add a repository containing charts
with some Hypper functionality:</p>
<pre><code class="language-terminal">$ hypper repo add rancher-charts https://charts.rancher.io
</code></pre>
<p>Now, you can list the repositories that Hypper can install charts from:</p>
<pre><code class="language-terminal">$ hypper repo list
NAME            URL
bitnami         https://charts.bitnami.com/bitnami
rancher-charts  https://charts.rancher.io
</code></pre>
<h2><a class="header" href="#install-an-example-helm-chart" id="install-an-example-helm-chart">Install an example Helm chart</a></h2>
<p>To install a chart, you can run the <code>hypper install</code> command. Hypper has several
ways to find and install a chart, but the easiest is to use a repository, in
this case the Bitnami chart repository.</p>
<pre><code class="language-terminal">$ hypper install mariadb bitnami/mariadb
Installing chart &quot;mariadb&quot; in namespace &quot;default&quot;…
Done! 👏
</code></pre>
<p>Whenever you install a chart, a new release is created. So one Helm chart can be
installed multiple times into the same cluster. And each can be independently
managed and upgraded.</p>
<h2><a class="header" href="#install-an-example-hypper-chart" id="install-an-example-hypper-chart">Install an example Hypper chart</a></h2>
<p>Hypper charts are supersets of Helm charts with more functionality, such as
specifying default release name, namespace of installation, or installing
shared-dependency charts automatically.
They are thought to be installed system-wide in the cluster: 1 Hypper chart for
all users of the cluster. Think of them as typical system OS libraries/services.</p>
<p>The commands are the same as you have already used:</p>
<pre><code class="language-terminal">$ hypper install rancher-charts/fleet --create-namespace
Installing chart &quot;fleet&quot; in namespace &quot;fleet-system&quot;…
Done! 👏
</code></pre>
<p>This time, the chart got installed with a default name <code>fleet</code>, and into a
default namespace  <code>fleet-system</code>. We passed the flag <code>--create-namespace</code> to
tell Hypper to create the namespace if it doesn't exist.</p>
<h2><a class="header" href="#learn-about-releases" id="learn-about-releases">Learn about releases</a></h2>
<p>It's easy to see what has been released with hypper:</p>
<pre><code class="language-terminal">$ hypper ls --all-namespaces
NAME       NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                 APP VERSION
fleet      fleet-system    1               2021-03-12 12:06:35.951012048 +0100 CET deployed        fleet-0.3.400         0.3.4
mariadb    default         1               2021-03-12 12:09:46.670491535 +0100 CET deployed        mariadb-9.3.5         10.5.9
</code></pre>
<h2><a class="header" href="#uninstall-a-release" id="uninstall-a-release">Uninstall a release</a></h2>
<p>To uninstall a release, use the hypper uninstall command:</p>
<pre><code class="language-terminal">$ hypper uninstall fleet -n fleet-system
🔥  uninstalling fleet
🔥  release &quot;fleet&quot; uninstalled
</code></pre>
<p>This will uninstall fleet from Kubernetes, which will remove all resources
associated with the release as well as the release history.</p>
<p>If the flag <code>--keep-history</code> is provided, release history will be kept. You will
be able to request information about that release:</p>
<pre><code class="language-terminal">$ hypper status fleet -n fleet-system
NAME: fleet
LAST DEPLOYED: Fri Mar 12 12:14:28 2021
NAMESPACE: fleet-system
STATUS: uninstalled
REVISION: 1
TEST SUITE: None
</code></pre>
<h2><a class="header" href="#read-the-help-text" id="read-the-help-text">Read the help text</a></h2>
<p>To learn more about available Hypper commands, use <code>hypper help</code>, or type a
command followed by the <code>-h</code> flag: <code>hypper install -h</code>.</p>
<p>This section contains some &quot;How tos&quot; that offer practical advice and detailed instruction in an activity. </p>
<h1><a class="header" href="#how-to-expand-a-chart-with-hypper-annotations" id="how-to-expand-a-chart-with-hypper-annotations">How to expand a chart with Hypper annotations</a></h1>
<p>Hypper charts build on top of Helm charts so any chart out there will work out of the box.</p>
<p>But we want to go further, we want to take advantage of Hypper features like release and namespace from annotations.</p>
<p>This is a simple as modifying our <code>Chart.yaml</code> to add to its annotations.</p>
<p>For example using the <a href="https://github.com/bitnami/charts/tree/master/bitnami/mysql">Mysql chart from Bitnami</a> as example, these are the contents of <code>Chart.yaml</code>:</p>
<pre><code class="language-yaml">annotations:
  category: Database
apiVersion: v2
appVersion: 8.0.23
dependencies:
  - name: common
    repository: https://charts.bitnami.com/bitnami
    tags:
      - bitnami-common
    version: 1.x.x
description: Chart to create a Highly available MySQL cluster
home: https://github.com/bitnami/charts/tree/master/bitnami/mysql
icon: https://bitnami.com/assets/stacks/mysql/img/mysql-stack-220x234.png
keywords:
  - mysql
  - database
  - sql
  - cluster
  - high availability
maintainers:
  - email: containers@bitnami.com
    name: Bitnami
name: mysql
sources:
  - https://github.com/bitnami/bitnami-docker-mysql
  - https://mysql.com
version: 8.5.1
</code></pre>
<p>But we want to install it always on the same namespace called <code>databases</code></p>
<p>So we will expand the <code>Chart.yaml</code> to look like this:</p>
<pre><code class="language-diff">annotations:
  category: Database
+ hypper.cattle.io/namespace: databases
apiVersion: v2
appVersion: 8.0.23
dependencies:
  - name: common
    repository: https://charts.bitnami.com/bitnami
    tags:
      - bitnami-common
    version: 1.x.x
description: Chart to create a Highly available MySQL cluster
home: https://github.com/bitnami/charts/tree/master/bitnami/mysql
icon: https://bitnami.com/assets/stacks/mysql/img/mysql-stack-220x234.png
keywords:
  - mysql
  - database
  - sql
  - cluster
  - high availability
maintainers:
  - email: containers@bitnami.com
    name: Bitnami
name: mysql
sources:
  - https://github.com/bitnami/bitnami-docker-mysql
  - https://mysql.com
version: 8.5.1
</code></pre>
<p>We added the <code>hypper.cattle.io/namespace: databases</code> to the annotation, so now when we install this chart with Hypper it will install into the proper namespace without any need to passing the value on the CLI:</p>
<pre><code class="language-shell">$ hypper install mysql/                 
Installing chart &quot;mysql&quot; in namespace &quot;databases&quot;…
Done! 👏 

</code></pre>
<p>See also how we didn't to specify any name for the release? Hypper is smart enough to try to obtain the name from the annotations (like the namespace!) and if it doesn't find it, it uses the name value on the <code>Chart.yaml</code></p>
<p>If we wanted to specify the release name in the annotations as well we just need to add <code>hypper.cattle.io/release-name</code> to the annotations as we did above with the namespace and hypper will take care of setting it! </p>
<h2><a class="header" href="#how-to-lint-a-hypper-chart" id="how-to-lint-a-hypper-chart">How to lint a hypper chart</a></h2>
<p>We just created or modified our chart or added annotations to take advantage of Hypper features but...how do we know those annotations are correct?</p>
<p>It's very simple, just run <code>hypper lint</code> against your chart, and it will verify that the chart is well-formed.</p>
<p><code>hypper lint</code> runs both Helm checks and Hypper checks against the chart.</p>
<p>If the linter encounters things that will cause the chart to fail installation, it will emit <code>[ERROR]</code> messages. If it encounters issues that break with convention or recommendation, it will emit <code>[WARNING]</code> messages.</p>
<p>For example, running it against one of our test charts with Hypper annotations should produce a warning due to a missing icon:</p>
<pre><code class="language-shell">$ hypper lint cmd/hypper/testdata/testcharts/hypper-annot
==&gt; Linting cmd/hypper/testdata/testcharts/hypper-annot
[INFO] Chart.yaml: icon is recommended

1 chart(s) linted, 0 chart(s) failed
</code></pre>
<p>While running it against a vanilla Helm chart with no extra Hypper annotations will emit several <code>[WARNING]</code>, recommending to set certain values that Hypper supports:</p>
<pre><code class="language-shell">$ hypper lint cmd/hypper/testdata/testcharts/vanilla-helm 
==&gt; Linting cmd/hypper/testdata/testcharts/vanilla-helm
[INFO] Chart.yaml: icon is recommended
[INFO] Chart.yaml: Setting hypper.cattle.io/release-name in annotations is recommended
[INFO] Chart.yaml: Setting hypper.cattle.io/namespace in annotations is recommended
[INFO] Chart.yaml: Setting hypper.cattle.io/shared-dependencies in annotations is recommended

1 chart(s) linted, 0 chart(s) failed
</code></pre>
<p>Running against a shared-dependencies annotation that is malformed will emit an <code>[ERROR]</code>:</p>
<pre><code class="language-shell">$ hypper lint cmd/hypper/testdata/testcharts/hypper-annot
==&gt; Linting cmd/hypper/testdata/testcharts/hypper-annot
[INFO] Chart.yaml: icon is recommended
[ERROR] Chart.yaml: Shared dependencies list is broken, please check the correct format

Error: 1 chart(s) linted, 1 chart(s) failed
</code></pre>
<p>Now if you were to set some kind of automated CI in place to check for linting and are required to have Hypper annotations as mandatory, you can run <code>hypper lint</code> with the <code>--strict</code> flag so all warnings are marked as errors.</p>
<pre><code class="language-shell">$ hypper lint cmd/hypper/testdata/testcharts/fallback-annot --strict
==&gt; Linting cmd/hypper/testdata/testcharts/fallback-annot
[INFO] Chart.yaml: icon is recommended
[WARNING] Chart.yaml: Setting hypper.cattle.io/release-name in annotations is recommended
[WARNING] Chart.yaml: Setting hypper.cattle.io/namespace in annotations is recommended
[WARNING] Chart.yaml: Setting hypper.cattle.io/shared-dependencies in annotations is recommended

Error: 1 chart(s) linted, 1 chart(s) failed
</code></pre>
<h2><a class="header" href="#searching-for-charts-in-repos" id="searching-for-charts-in-repos">Searching for charts in repos</a></h2>
<p>Search reads through all the repositories configured on the system, and looks for matches. Searching on these repositories uses the metadata stored on the system.</p>
<p>It will display the latest stable versions of the charts found.</p>
<pre><code class="language-shell">$ hypper search repo fleet
NAME              	CHART VERSION	APP VERSION	DESCRIPTION                            
hypper/fleet      	0.3.500      	0.3.5      	Fleet Manager - GitOps at Scale        
hypper/fleet-agent	0.3.500      	0.3.5      	Fleet Manager Agent - GitOps at Scale  
hypper/fleet-crd  	0.3.500      	0.3.5      	Fleet Manager CustomResourceDefinitions
</code></pre>
<p>By default, it will only show the latest version that match the keyword used. In order to see all versions you can use the <code>-l</code> flag.</p>
<pre><code class="language-shell">$ hypper search repo fleet-agent -l
NAME              	CHART VERSION	APP VERSION	DESCRIPTION                          
hypper/fleet-agent	0.3.500      	0.3.5      	Fleet Manager Agent - GitOps at Scale
hypper/fleet-agent	0.1.500      	0.1.5      	Fleet Manager Agent - GitOps at Scale
</code></pre>
<p>You can also search for a specific chart version by using the <code>--version VERSION</code> flag..</p>
<p>Note that VERSION needs to be a valid SemVer version.</p>
<pre><code class="language-shell">$ hypper search repo fleet-agent --version 0.1.500
NAME              	CHART VERSION	APP VERSION	DESCRIPTION                          
hypper/fleet-agent	0.1.500      	0.1.5      	Fleet Manager Agent - GitOps at Scale
</code></pre>
<p>It's also possible to pass the <code>--regexp</code> flag to use regexp in the search.</p>
<pre><code class="language-shell">$ hypper search repo &quot;fleet-&quot; --regexp
NAME              	CHART VERSION	APP VERSION	DESCRIPTION                            
hypper/fleet-agent	0.3.500      	0.3.5      	Fleet Manager Agent - GitOps at Scale  
hypper/fleet-crd  	0.3.500      	0.3.5      	Fleet Manager CustomResourceDefinitions
</code></pre>
<p>If you want to search for development charts (only stable charts are shown by default), use the <code>--devel</code> flag to show those development charts.</p>
<pre><code class="language-shell">$ hypper search repo fleet-agent --devel
NAME              	CHART VERSION	APP VERSION	DESCRIPTION                            
hypper/fleet-agent	0.3.500-rc2      	0.3.5-rc2      	Fleet Manager Agent - GitOps at Scale
</code></pre>
<h1><a class="header" href="#reference-guides" id="reference-guides">Reference guides</a></h1>
<p>You can find Golang reference guides in
<a href="https://pkg.go.dev/github.com/rancher-sandbox/hypper">pkg.go.dev/github.com/rancher-sandbox/hypper</a>,
particularly for the <a href="https://pkg.go.dev/github.com/rancher-sandbox/hypper/pkg">Hypper library API</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
